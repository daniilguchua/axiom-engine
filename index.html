<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AXIOM // ENGINE v1.3</title>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.3.0/dist/mermaid.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono:wght@400;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <canvas id="neural-canvas"></canvas>

    <div id="app-container">
        <header>
            <div class="brand">
                AXIOM <span>//</span> ENGINE <span class="version">v1.3</span>
            </div>
            <div class="header-right">
                <div class="difficulty-indicator" id="difficulty-badge" title="Click to change difficulty">
                    <span class="diff-icon">‚öôÔ∏è</span>
                    <span class="diff-text">ENGINEER</span>
                </div>
                <button id="btn-disconnect">END SESSION</button>
                <div class="status-badge">
                    <div class="status-dot" id="status-dot"></div>
                    <span id="status-text">SYSTEM IDLE</span>
                </div>
            </div>
        </header>

        <div id="lobby-panel">
            <div class="lobby-content">
            
                <!-- HERO TAGLINE -->
                <div class="hero-tagline">
                    <h1>See Algorithms <span>Think</span></h1>
                    <p>Interactive algorithm visualization engine powered by AI. Transform complex concepts into <span class="highlight">step-by-step simulations</span> you can explore.</p>
                </div>
                
                <!-- SECTION LABEL -->
                <div class="construct-header">
                    <span>Choose Your Path</span>
                </div>
                
                <!-- FEATURE CARDS -->
                <div class="cards-row">
                    <div class="tech-card" id="card-sim">
                        <div class="tech-icon">‚ö°</div>
                        <div class="tech-content">
                            <div class="tech-title">Start Simulation</div>
                            <div class="tech-desc">Type any algorithm or concept. Watch it come alive with interactive visualizations.</div>
                        </div>
                    </div>
                    <div class="tech-card" id="card-context">
                        <div class="tech-icon">üìÑ</div>
                        <div class="tech-content">
                            <div class="tech-title">Load Context</div>
                            <div class="tech-desc">Upload a PDF to analyze. Ask questions with document-aware responses.</div>
                        </div>
                        <input type="file" id="file-upload" accept=".pdf" style="display:none;">
                        <div class="spinner-overlay" id="spin-pdf" style="display:none;">
                            <div class="spin-ring"></div>
                            <span>PROCESSING</span>
                        </div>
                    </div>
                </div>
                
                <!-- QUICK PRESETS (hidden by default via CSS, revealed on card-sim click) -->
                <div id="quick-presets">
                    <div class="preset-label">Popular Simulations</div>
                    <div class="preset-buttons">
                        <button class="preset-btn" data-prompt="Simulate binary search step by step, showing how the search space narrows">üîç Binary Search</button>
                        <button class="preset-btn" data-prompt="Simulate Dijkstra's shortest path algorithm on a weighted graph">üó∫Ô∏è Dijkstra's Algorithm</button>
                        <button class="preset-btn" data-prompt="Simulate neural network backpropagation with actual gradient calculations">üß† Backpropagation</button>
                        <button class="preset-btn" data-prompt="Simulate quicksort with partition visualization and pivot selection">üìä QuickSort</button>
                        <button class="preset-btn" data-prompt="Simulate TCP three-way handshake between client and server">üåê TCP Handshake</button>
                        <button class="preset-btn" data-prompt="Simulate BFS traversal on a graph, showing the queue and visited nodes">üîÑ BFS Traversal</button>
                    </div>
                </div>

                <div class="lobby-search-wrapper">
                    <button id="lobby-enhance-btn" title="Enhance prompt with AI">‚ú®</button>
                    <input type="text" id="lobby-input" placeholder="Describe an algorithm, concept, or process to visualize..." autocomplete="off">
                    <button id="lobby-btn">GENERATE ‚Üí</button>
                </div>
            
            </div>
        </div>

        <div id="chat-panel">
            <div id="chat-history"></div>
            
            <div class="input-wrapper">
                <div class="input-row">
                    <!-- Difficulty Dropdown -->
                    <div class="difficulty-dropdown" id="difficulty-dropdown">
                        <button class="diff-dropdown-trigger" id="diff-trigger" type="button">
                            <span class="diff-current-icon">‚öôÔ∏è</span>
                            <span class="diff-current-text">Engineer</span>
                            <span class="diff-chevron">‚ñæ</span>
                        </button>
                        <div class="diff-dropdown-menu" id="diff-menu">
                            <button class="diff-option" data-difficulty="explorer" type="button">
                                <span class="diff-option-icon">üåü</span>
                                <span class="diff-option-content">
                                    <span class="diff-option-name">Explorer</span>
                                    <span class="diff-option-desc">Beginner-friendly</span>
                                </span>
                            </button>
                            <button class="diff-option active" data-difficulty="engineer" type="button">
                                <span class="diff-option-icon">‚öôÔ∏è</span>
                                <span class="diff-option-content">
                                    <span class="diff-option-name">Engineer</span>
                                    <span class="diff-option-desc">Technical</span>
                                </span>
                            </button>
                            <button class="diff-option" data-difficulty="architect" type="button">
                                <span class="diff-option-icon">üèóÔ∏è</span>
                                <span class="diff-option-content">
                                    <span class="diff-option-name">Architect</span>
                                    <span class="diff-option-desc">Deep theory</span>
                                </span>
                            </button>
                        </div>
                    </div>
                    
                    <button class="btn secondary" id="btn-enhance">‚ú®</button>
                    <input type="text" id="user-input" placeholder="Describe what you want to simulate...">
                    <button class="btn secondary" onclick="document.getElementById('file-upload').click()">üìé</button>
                    <button class="btn" id="btn-send">EXECUTE</button>
                </div>
            </div>
        </div>
    </div>

    <!-- DIFFICULTY SELECTION MODAL -->
    <dialog id="difficulty-modal" class="difficulty-modal">
        <div class="difficulty-modal-content">
            <div class="difficulty-modal-header">
                <h2>üéØ Choose Your Learning Level</h2>
                <p>Select the depth and style that matches your experience</p>
            </div>
            
            <div class="difficulty-cards">
                <!-- EXPLORER -->
                <div class="difficulty-card" data-difficulty="explorer">
                    <div class="diff-card-header explorer">
                        <span class="diff-card-icon">üåü</span>
                        <span class="diff-card-title">Explorer</span>
                    </div>
                    <div class="diff-card-tagline">Fun & Friendly Learning</div>
                    <div class="diff-card-body">
                        <p class="diff-card-desc">Perfect for beginners! Uses games, analogies, and emojis to make algorithms approachable and fun.</p>
                        <div class="diff-card-audience">
                            <strong>Best for:</strong> CS101/102 students, visual learners, anyone new to algorithms
                        </div>
                        <ul class="diff-card-features">
                            <li>üéÆ Game & real-world analogies</li>
                            <li>üòä Encouraging, simple language</li>
                            <li>üìä Clean diagrams (8-15 nodes)</li>
                            <li>üéâ Celebrates your progress!</li>
                        </ul>
                    </div>
                    <div class="diff-card-example">
                        <strong>Example:</strong> "BFS is like a pizza delivery driver visiting ALL houses on one street before moving to the next!"
                    </div>
                </div>
                
                <!-- ENGINEER -->
                <div class="difficulty-card selected" data-difficulty="engineer">
                    <div class="diff-card-header engineer">
                        <span class="diff-card-icon">‚öôÔ∏è</span>
                        <span class="diff-card-title">Engineer</span>
                        <span class="diff-card-badge">RECOMMENDED</span>
                    </div>
                    <div class="diff-card-tagline">Technical & Practical</div>
                    <div class="diff-card-body">
                        <p class="diff-card-desc">Industry-ready explanations with Big-O analysis, pseudocode, edge cases, and real-world applications.</p>
                        <div class="diff-card-audience">
                            <strong>Best for:</strong> DS&A students, interview prep, working developers
                        </div>
                        <ul class="diff-card-features">
                            <li>üìê Time/Space complexity analysis</li>
                            <li>üíª Pseudocode with calculations</li>
                            <li>‚ö†Ô∏è Edge cases & invariants</li>
                            <li>üîß Real-world applications</li>
                        </ul>
                    </div>
                    <div class="diff-card-example">
                        <strong>Example:</strong> "Dijkstra's runs in O((V+E)log V) with a binary heap. The invariant: extracted nodes have final distances."
                    </div>
                </div>
                
                <!-- ARCHITECT -->
                <div class="difficulty-card" data-difficulty="architect">
                    <div class="diff-card-header architect">
                        <span class="diff-card-icon">üèóÔ∏è</span>
                        <span class="diff-card-title">Architect</span>
                    </div>
                    <div class="diff-card-tagline">Deep Theory & Systems</div>
                    <div class="diff-card-body">
                        <p class="diff-card-desc">Research-level depth with mathematical rigor, hardware context, tensor operations, and scaling analysis.</p>
                        <div class="diff-card-audience">
                            <strong>Best for:</strong> Grad students, senior engineers, ML researchers
                        </div>
                        <ul class="diff-card-features">
                            <li>üìù Mathematical derivations</li>
                            <li>üñ•Ô∏è Hardware-aware (FLOPs, bandwidth)</li>
                            <li>üî¨ Numerical stability analysis</li>
                            <li>üìà Scaling & production concerns</li>
                        </ul>
                    </div>
                    <div class="diff-card-example">
                        <strong>Example:</strong> "Attention is O(n¬≤d). The n√ón matrix is memory-bound; Flash Attention tiles to avoid materialization."
                    </div>
                </div>
            </div>
            
            <div class="difficulty-modal-footer">
                <button id="btn-diff-cancel" class="btn-diff secondary">Cancel</button>
                <button id="btn-diff-confirm" class="btn-diff primary">
                    <span id="btn-diff-text">Start with Engineer Mode</span>
                    <span class="btn-arrow">‚Üí</span>
                </button>
            </div>
        </div>
    </dialog>

    <!-- INPUT MODAL (existing) -->
    <dialog id="input-modal" class="cyber-modal">
        <div class="modal-content">
            <div class="modal-header">>> AXIOM_INPUT_REQUIRED</div>
            <div class="modal-body">
                <label id="modal-label">Enter Parameter:</label>
                <input type="text" id="modal-input-field" autocomplete="off">
            </div>
            <div class="modal-footer">
                <button id="btn-modal-cancel">ABORT</button>
                <button id="btn-modal-confirm">EXECUTE_COMMAND</button>
            </div>
        </div>
    </dialog>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/sanitizer.js"></script>
    <script src="js/repair.js"></script>
    <script src="neural-bg.js"></script> 
    <script src="js/renderer.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/interactions.js"></script>
    <script src="js/difficulty.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
